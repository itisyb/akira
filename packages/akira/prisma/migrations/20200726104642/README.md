# Migration `20200726104642`

This migration has been generated by pandaniell at 7/26/2020, 10:46:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."guild_settings" (
"id" text  NOT NULL ,
"prefix" text  NOT NULL DEFAULT E'!',
"updated_by" text  NOT NULL DEFAULT E'673530627018063872',
"action" text  NOT NULL ,
"updated_at" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."answer" (
"id" SERIAL,
"user_id" text  NOT NULL ,
"answer_index" integer  NOT NULL ,
"question_id" text   ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."question" (
"id" text  NOT NULL ,
"author_id" text  NOT NULL ,
"question" text  NOT NULL ,
"possible_answers" text []  ,
"is_anonymous" boolean  NOT NULL ,
PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "answer_user_id_question_id_key" ON "public"."answer"("user_id","question_id")

ALTER TABLE "public"."answer" ADD FOREIGN KEY ("question_id")REFERENCES "public"."question"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200726104642
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,46 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model GuildSettings {
+  /// Id of the guild
+  id        String   @id
+  prefix    String   @default(value: "!")
+  updatedBy String   @default(value: "673530627018063872") @map(name: "updated_by")
+  /// Action that caused the update
+  action    String
+  updatedAt DateTime @updatedAt @map(name: "updated_at")
+
+  @@map(name: "guild_settings")
+}
+
+model Answer {
+  id          Int       @id @default(autoincrement())
+  userId      String    @map(name: "user_id")
+  answerIndex Int       @map(name: "answer_index")
+  question    Question? @relation(fields: [questionId], references: [id])
+  questionId  String?   @map(name: "question_id")
+
+  @@unique([userId, questionId], name: "answer_user_id_question_id_key")
+  @@map(name: "answer")
+}
+
+model Question {
+  /// Id of the message the question belongs to
+  id              String   @id
+  authorId        String   @map(name: "author_id")
+  question        String
+  possibleAnswers String[] @map(name: "possible_answers")
+  isAnonymous     Boolean  @map(name: "is_anonymous")
+  answers         Answer[]
+
+  @@map(name: "question")
+}
```


